---
alwaysApply: true
---

# Cursor Rule: Local Development

## Dev Servers

**Frontend (Preact PWA):**
```powershell
cd frontend
pnpm install
pnpm dev  # → http://localhost:5173
```

**TypeScript Services (Mock Servers):**
```powershell
cd AskAi_KVS

# Terminal 1: KVS Mock
npx tsx mocks/kvs-server.ts  # → http://localhost:9000

# Terminal 2: AskAI Mock
npx tsx mocks/askai-server.ts  # → http://localhost:9001
```

**Rust Game API (Local Lambda):**
```powershell
cd backend
cargo lambda watch  # → http://localhost:9000/lambda-url/api
```

## Environment Setup

**Frontend:**
- Copy `frontend/.env.example` to `frontend/.env.local`
- Set endpoints to local mocks or deployed URLs

**Backend/Services:**
- Copy `.env.example` to `.env` (root)
- Configure service endpoints

## Browser Debugging

Cursor Browser tool can:
- Navigate to http://localhost:5173 when Vite is running
- Take screenshots
- Read console messages
- Interact with elements

## Lambda Testing

### Option 1: Local Mock Servers (Recommended)
Use the mock servers in `AskAi_KVS/mocks/` for development without AWS.

### Option 2: SAM Local
For testing actual Lambda handlers:
```powershell
cd infrastructure
sam build --use-container
sam local start-api  # → http://localhost:3000
# Requires Docker running
```

### Option 3: Deployed Endpoints
Point local frontend to deployed Lambda endpoints in `.env.local`.

## Hot Reload

- **Vite**: Automatic on file save
- **Mock servers**: Automatic (tsx watch mode)
- **Rust Lambda**: Automatic with `cargo lambda watch`
- **SAM local**: Manual rebuild required
